<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN"
"http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  
	<dict>
		<key>Label</key>
		<string>dev.rabbitmq</string>

		<key>Boxen</key>
		<dict>
			<key>Description</key>
			<string>Robust messaging for applications.</string>

			<key>Port</key>
			<integer>55672</integer>

			<key>Mgmt Port</key>
			<integer>15672</integer>
		</dict>

		<key>Program</key>
		<string><%= scope.lookupvar "boxen::config::homebrewdir" %>/sbin/rabbitmq-server</string>

		<key>EnvironmentVariables</key>
		<dict>

			<key>PATH</key>
			<string><%= scope.lookupvar "boxen::config::homebrewdir" %>/sbin:<%= scope.lookupvar "boxen::config::homebrewdir" %>/bin:/usr/bin:/bin</string>

			<key>RABBITMQ_CONFIG_FILE</key>
			<string><%= scope.lookupvar "::boxen_home" %>/config/rabbitmq/rabbitmq</string>

			<key>RABBITMQ_NODE_IP_ADDRESS</key>
			<string>127.0.0.1</string>

			<key>RABBITMQ_NODENAME</key>
			<string>rabbit@localhost</string>

			<key>RABBITMQ_MNESIA_BASE</key>
			<string><%= scope.lookupvar "::boxen_home" %>/data/rabbitmq</string>

			<key>RABBITMQ_ENABLED_PLUGINS_FILE</key>
			<string><%= scope.lookupvar "::boxen_home" %>/config/rabbitmq/enabled_plugins</string>

			<key>RABBITMQ_NODE_PORT</key>
			<string>55672</string>

			<key>RABBITMQ_LOG_BASE</key>
			<string><%= scope.lookupvar "::boxen_home" %>/log/rabbitmq</string>
		</dict>

		<key>RunAtLoad</key>
		<true />

		<key>KeepAlive</key>
		<true />

		<key>UserName</key>
		<string><%= scope.lookupvar "::boxen_user" %></string>

		<key>WorkingDirectory</key>
		<string><%= scope.lookupvar "::boxen_home" %>/data/rabbitmq</string>

		<key>StandardErrorPath</key>
		<string><%= scope.lookupvar "::boxen_home" %>/log/rabbitmq/console.log</string>

		<key>StandardOutPath</key>
		<string><%= scope.lookupvar "::boxen_home" %>/log/rabbitmq/console.log</string>
	</dict>
</plist>